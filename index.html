<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Diesel Voucher</title>

    <!-- PWA Support -->
    <meta name="theme-color" content="#667eea">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Diesel Voucher">
    <link rel="manifest" href="data:application/manifest+json,{%22name%22:%22Diesel Voucher%22,%22short_name%22:%22Diesel%22,%22start_url%22:%22.%22,%22display%22:%22standalone%22,%22background_color%22:%22#667eea%22,%22theme_color%22:%22#667eea%22,%22icons%22:[{%22src%22:%22https://rpm.gt.tc/logo.png%22,%22sizes%22:%22192x192%22,%22type%22:%22image/png%22},{%22src%22:%22https://rpm.gt.tc/logo.png%22,%22sizes%22:%22512x512%22,%22type%22:%22image/png%22}]}">

    <style>
        @keyframes floatBounce{0%,100%{transform:translateY(0) scale(1)}50%{transform:translateY(-12px) scale(1.05)}}
        @keyframes buttonPress{0%{transform:scale(1)}50%{transform:scale(0.95)}100%{transform:scale(1)}}
        @keyframes ripple{0%{transform:scale(0);opacity:1}100%{transform:scale(4);opacity:0}}
        @keyframes spinner{to{transform:rotate(360deg)}}
        @keyframes checkmark{0%{transform:scale(0);opacity:0}50%{transform:scale(1.2)}100%{transform:scale(1);opacity:1}}
        @keyframes fadeOut{to{opacity:0;transform:scale(0.8)}}
        @keyframes progress{0%{width:0%}100%{width:100%}}
        @keyframes fadeIn{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}

        body{font-family:Arial,sans-serif;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);margin:0;padding:15px;display:flex;justify-content:center;align-items:center;min-height:100vh}
        .form-container{background:white;padding:25px 20px;border-radius:20px;box-shadow:0 10px 40px rgba(0,0,0,0.2);width:100%;max-width:400px;animation:fadeIn .8s ease-out;position:relative;overflow:visible}
        .header{text-align:center;margin-bottom:25px}
        .logo{width:90px;height:90px;object-fit:contain;margin:0 auto 12px;animation:floatBounce 3s ease-in-out infinite;border-radius:50%;padding:8px;background:white;box-shadow:0 6px 20px rgba(0,0,0,0.18);border:4px solid #4caf50}
        .title{font-size:22px;color:#333;font-weight:bold;margin-top:5px}
        .form-group{margin-bottom:18px}
        label{display:block;margin-bottom:6px;font-weight:600;color:#555;font-size:14px}
        input,select{width:100%;padding:12px;border:2px solid #e0e0e0;border-radius:10px;box-sizing:border-box;font-size:15px;transition:all .3s}
        input:focus,select:focus{outline:none;border-color:#4caf50;box-shadow:0 0 0 3px rgba(76,175,80,0.1)}
        .required{color:#ff5252}
        .submit-btn{width:100%;padding:15px;background:linear-gradient(135deg,#4caf50 0%,#45a049 100%);color:white;border:none;border-radius:12px;font-size:17px;font-weight:bold;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:10px;position:relative;overflow:hidden;transition:all .3s;box-shadow:0 4px 15px rgba(76,175,80,0.4);margin-top:10px}
        .submit-btn:hover{transform:translateY(-2px);box-shadow:0 6px 20px rgba(76,175,80,0.5)}
        .submit-btn:active{animation:buttonPress .3s}
        .submit-btn.animating{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);pointer-events:none}
        .submit-btn-text{transition:all .3s}
        .loader{display:none;width:24px;height:24px;border:3px solid rgba(255,255,255,0.3);border-top-color:#fff;border-radius:50%;animation:spinner .8s linear infinite}
        .checkmark{display:none;font-size:28px;font-weight:bold}
        .submit-btn.animating .loader{display:block}
        .submit-btn.animating .submit-btn-text{animation:fadeOut .3s forwards;opacity:0}
        .submit-btn.success .checkmark{display:block;animation:checkmark .5s forwards}
        .progress-bar{position:absolute;bottom:0;left:0;height:4px;background:rgba(255,255,255,0.5);border-radius:0 0 12px 12px;display:none}
        .submit-btn.animating .progress-bar{display:block;animation:progress 2s forwards}
        .ripple-effect{position:absolute;border-radius:50%;background:rgba(255,255,255,0.6);width:20px;height:20px;pointer-events:none;animation:ripple .6s ease-out}
        .footer{text-align:center;margin-top:20px;font-size:12px;color:#888}
        @media (max-width:480px){.logo{width:80px;height:80px}.title{font-size:20px}input,select{font-size:16px}}
    </style>
</head>
<body>
    <div class="form-container">
        <div class="header">
            <img src="https://rpm.gt.tc/logo.png" alt="RPM Logo" class="logo">
            <div class="title">Diesel Voucher</div>
        </div>

        <form id="dieselForm">
            <div class="form-group"><label for="vehicleNo">üöõ Vehicle No<span class="required">*</span></label><input type="text" id="vehicleNo" required></div>
            <div class="form-group"><label for="vehicleType">üöö Vehicle Type<span class="required">*</span></label>
                <select id="vehicleType" required>
                    <option value="">Select Vehicle Type</option>
                    <option value="BUS,6">BUS,6</option><option value="TATA ACE,14">TATA ACE,14</option><option value="TATA INTRA,12">TATA INTRA,12</option><option value="PICKUP,10">PICKUP,10</option><option value="10 FT.8.5">10 FT.8.5</option><option value="14 FT,7">14 FT,7</option><option value="16 FT,7">16 FT,7</option><option value="20 FT,6.5">20 FT,6.5</option><option value="22 FT,6">22 FT,6</option><option value="24 FT,5.5">24 FT,5.5</option><option value="32 FT,4">32 FT,4</option><option value="407,8.5">407,8.5</option><option value="GANRETOR,1">GANRETOR,1</option>
                </select>
            </div>
            <div class="form-group"><label for="fromLocation">üìç From Location<span class="required">*</span></label><input type="text" id="fromLocation" required></div>
            <div class="form-group"><label for="lastLocation">üìç Last Location<span class="required">*</span></label><input type="text" id="lastLocation" required></div>
            <div class="form-group"><label for="currentKm">üìä Current KM</label><input type="number" id="currentKm"></div>
            <div class="form-group"><label for="diesel">üí∏ Diesel (‚Çπ)<span class="required">*</span></label><input type="number" id="diesel" required></div>
            <div class="form-group"><label for="vendorName">üëÆüèª Vendor Name<span class="required">*</span></label>
                <select id="vendorName" required>
                    <option value="">Select Vendor</option>
                    <option value="RPM LOGISTICS PVT LTD.">RPM LOGISTICS PVT LTD.</option>
                    <option value="MASS ENTERPRISES.">MASS ENTERPRISES.</option>
                    <option value="SHREE DATTA KRUPA">SHREE DATTA KRUPA</option>
                    <option value="SKYTRACK">SKYTRACK</option>
                    <option value="ANAND TRANSPORT">ANAND TRANSPORT</option>
                    <option value="RAJ TRANSPORT">RAJ TRANSPORT</option>
                    <option value="KOLKATA CHENNAI ROADLINE">KOLKATA CHENNAI ROADLINE</option>
                    <option value="SARTHAK TRANSPORT.">SARTHAK TRANSPORT.</option>
                </select>
            </div>
            <div class="form-group"><label for="note">üìù Note</label><input type="text" id="note"></div>

            <button type="submit" class="submit-btn">
                <span class="submit-btn-text">SUBMIT</span>
                <span class="loader"></span>
                <span class="checkmark">‚úì</span>
                <div class="progress-bar"></div>
            </button>
        </form>
        <div class="footer">WhatsApp Form built with ‚ù§Ô∏è</div>
    </div>

    <script>
        document.getElementById('vehicleNo').addEventListener('input', e => {
            e.target.value = e.target.value.toUpperCase().replace(/\s/g, '');
        });

        document.querySelector('.submit-btn').addEventListener('click', e => {
            const ripple = document.createElement('span');
            ripple.classList.add('ripple-effect');
            const rect = e.currentTarget.getBoundingClientRect();
            ripple.style.left = (e.clientX - rect.left) + 'px';
            ripple.style.top = (e.clientY - rect.top) + 'px';
            e.currentTarget.appendChild(ripple);
            setTimeout(() => ripple.remove(), 600);
        });

        document.getElementById('dieselForm').addEventListener('submit', function(e) {
            e.preventDefault();

            const now = new Date();
            const dateTime = `${String(now.getDate()).padStart(2,'0')}-${String(now.getMonth()+1).padStart(2,'0')}-${now.getFullYear()},${String(now.getHours()).padStart(2,'0')}:${String(now.getMinutes()).padStart(2,'0')}`;

            const req = ['vehicleNo','vehicleType','fromLocation','lastLocation','diesel','vendorName'];
            if (!req.every(id => document.getElementById(id).value.trim())) {
                alert("Please fill all required fields.");
                return;
            }

            const rid = Math.floor(10000 + Math.random() * 90000);
            const v = {
                vn: document.getElementById('vehicleNo').value,
                vt: document.getElementById('vehicleType').value,
                from: document.getElementById('fromLocation').value,
                last: document.getElementById('lastLocation').value,
                km: document.getElementById('currentKm').value.trim(),
                diesel: document.getElementById('diesel').value,
                vendor: document.getElementById('vendorName').value,
                note: document.getElementById('note').value.trim()
            };

            // üî• ‡§Ö‡§¨ WhatsApp message ‡§Æ‡•á‡§Ç ‡§≠‡•Ä ‡§∏‡§π‡•Ä ‡§ï‡•ç‡§∞‡§Æ üî•
            let msg = `üîîDiesel Requestüì¢\nResponse #${rid}\nüìÖ Date & Time. : ${dateTime}\nüöõ Vehicle No. : ${v.vn}\nüöö Vehicle Type. : ${v.vt}\nüìç From Location. : ${v.from}\nüìçLast Location. : ${v.last}`;
            if (v.km) msg += `\nüìä Current KM. : ${v.km}`;
            msg += `\nüí∏ Diesel (‚Çπ INR). : ${v.diesel}\nüëÆüèª Vendor Name. : ${v.vendor}`;
            if (v.note) msg += `\nüìù Note. : ${v.note}`;

            const btn = document.querySelector('.submit-btn');
            btn.classList.add('animating');

            setTimeout(() => {
                btn.classList.remove('animating');
                btn.classList.add('success');
                setTimeout(() => {
                    window.open(`https://wa.me/916206494170?text=${encodeURIComponent(msg)}`, '_blank');
                    btn.classList.remove('success');
                }, 800);
            }, 1800);
        });

        let deferredPrompt;
        window.addEventListener('beforeinstallprompt', e => { e.preventDefault(); deferredPrompt = e; });
    </script>
</body>
</html>